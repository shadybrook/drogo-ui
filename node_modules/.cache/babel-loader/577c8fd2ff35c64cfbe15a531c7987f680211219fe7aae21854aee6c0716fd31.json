{"ast":null,"code":"import _objectWithoutProperties from\"/Users/chintandedhia/100xDevs/PropulsionTestData/Drogo_UI/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _toPropertyKey from\"/Users/chintandedhia/100xDevs/PropulsionTestData/Drogo_UI/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js\";import _objectSpread from\"/Users/chintandedhia/100xDevs/PropulsionTestData/Drogo_UI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{useOrders}from'./OrderContext';// import { toast } from 'react-toastify'; // Removed - not used after removing notifications\nimport{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const useCart=()=>{const context=useContext(CartContext);if(!context){throw new Error('useCart must be used within a CartProvider');}return context;};export const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState({});const[isCartOpen,setIsCartOpen]=useState(false);// Load cart from localStorage on mount\nuseEffect(()=>{const savedCart=localStorage.getItem('drogo_cart');if(savedCart){try{const cartData=JSON.parse(savedCart);setCartItems(cartData);}catch(error){console.error('Error parsing saved cart data:',error);localStorage.removeItem('drogo_cart');}}},[]);// Save cart to localStorage whenever it changes\nuseEffect(()=>{localStorage.setItem('drogo_cart',JSON.stringify(cartItems));},[cartItems]);const addToCart=function(productId){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setCartItems(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:(prev[productId]||0)+quantity}));// Removed notification - not critical for user experience\n// toast.success('Item added to cart! ðŸ›’', {\n//   autoClose: 2000\n// });\n};const updateQuantity=(productId,quantity)=>{if(quantity<=0){removeFromCart(productId);return;}setCartItems(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:quantity}));};const increaseQuantity=productId=>{setCartItems(prev=>_objectSpread(_objectSpread({},prev),{},{[productId]:(prev[productId]||0)+1}));};const decreaseQuantity=productId=>{setCartItems(prev=>{const currentQty=prev[productId]||0;if(currentQty<=1){const{[productId]:removed}=prev,rest=_objectWithoutProperties(prev,[productId].map(_toPropertyKey));// Don't show notification here since removeFromCart will be called\nreturn rest;}return _objectSpread(_objectSpread({},prev),{},{[productId]:currentQty-1});});};const removeFromCart=productId=>{setCartItems(prev=>{const{[productId]:removed}=prev,rest=_objectWithoutProperties(prev,[productId].map(_toPropertyKey));// Only show notification for explicit removals, not automatic ones\nreturn rest;});};const clearCart=()=>{setCartItems({});// Removed notification - not critical, order success is more important\n// toast.info('Cart cleared', { autoClose: 2000 });\n};const getCartTotal=productCatalog=>{let subtotal=0;let totalItems=0;Object.entries(cartItems).forEach(_ref2=>{let[productId,quantity]=_ref2;const product=productCatalog.find(p=>p.id===productId);if(product){subtotal+=product.price*quantity;totalItems+=quantity;}});const convenienceFee=subtotal>0?19:0;const tax=Math.round(subtotal*0.05);const total=subtotal+convenienceFee+tax;return{subtotal,convenienceFee,tax,total,totalItems};};const getTotalItems=()=>{return Object.values(cartItems).reduce((sum,qty)=>sum+qty,0);};const isItemInCart=productId=>{return cartItems[productId]>0;};const getItemQuantity=productId=>{return cartItems[productId]||0;};const openCart=()=>{setIsCartOpen(true);};const closeCart=()=>{setIsCartOpen(false);};const value={cartItems,isCartOpen,addToCart,updateQuantity,increaseQuantity,decreaseQuantity,removeFromCart,clearCart,getCartTotal,getTotalItems,isItemInCart,getItemQuantity,openCart,closeCart};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useOrders","jsx","_jsx","CartContext","useCart","context","Error","CartProvider","_ref","children","cartItems","setCartItems","isCartOpen","setIsCartOpen","savedCart","localStorage","getItem","cartData","JSON","parse","error","console","removeItem","setItem","stringify","addToCart","productId","quantity","arguments","length","undefined","prev","_objectSpread","updateQuantity","removeFromCart","increaseQuantity","decreaseQuantity","currentQty","removed","rest","_objectWithoutProperties","map","_toPropertyKey","clearCart","getCartTotal","productCatalog","subtotal","totalItems","Object","entries","forEach","_ref2","product","find","p","id","price","convenienceFee","tax","Math","round","total","getTotalItems","values","reduce","sum","qty","isItemInCart","getItemQuantity","openCart","closeCart","value","Provider"],"sources":["/Users/chintandedhia/100xDevs/PropulsionTestData/Drogo_UI/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useOrders } from './OrderContext';\n// import { toast } from 'react-toastify'; // Removed - not used after removing notifications\n\nconst CartContext = createContext();\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n\nexport const CartProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState({});\n  const [isCartOpen, setIsCartOpen] = useState(false);\n\n  // Load cart from localStorage on mount\n  useEffect(() => {\n    const savedCart = localStorage.getItem('drogo_cart');\n    if (savedCart) {\n      try {\n        const cartData = JSON.parse(savedCart);\n        setCartItems(cartData);\n      } catch (error) {\n        console.error('Error parsing saved cart data:', error);\n        localStorage.removeItem('drogo_cart');\n      }\n    }\n  }, []);\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('drogo_cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  const addToCart = (productId, quantity = 1) => {\n    setCartItems(prev => ({\n      ...prev,\n      [productId]: (prev[productId] || 0) + quantity\n    }));\n    \n    // Removed notification - not critical for user experience\n    // toast.success('Item added to cart! ðŸ›’', {\n    //   autoClose: 2000\n    // });\n  };\n\n  const updateQuantity = (productId, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(productId);\n      return;\n    }\n    \n    setCartItems(prev => ({\n      ...prev,\n      [productId]: quantity\n    }));\n  };\n\n  const increaseQuantity = (productId) => {\n    setCartItems(prev => ({\n      ...prev,\n      [productId]: (prev[productId] || 0) + 1\n    }));\n  };\n\n  const decreaseQuantity = (productId) => {\n    setCartItems(prev => {\n      const currentQty = prev[productId] || 0;\n      if (currentQty <= 1) {\n        const { [productId]: removed, ...rest } = prev;\n        // Don't show notification here since removeFromCart will be called\n        return rest;\n      }\n      return {\n        ...prev,\n        [productId]: currentQty - 1\n      };\n    });\n  };\n\n  const removeFromCart = (productId) => {\n    setCartItems(prev => {\n      const { [productId]: removed, ...rest } = prev;\n      // Only show notification for explicit removals, not automatic ones\n      return rest;\n    });\n  };\n\n  const clearCart = () => {\n    setCartItems({});\n    // Removed notification - not critical, order success is more important\n    // toast.info('Cart cleared', { autoClose: 2000 });\n  };\n\n  const getCartTotal = (productCatalog) => {\n    let subtotal = 0;\n    let totalItems = 0;\n    \n    Object.entries(cartItems).forEach(([productId, quantity]) => {\n      const product = productCatalog.find(p => p.id === productId);\n      if (product) {\n        subtotal += product.price * quantity;\n        totalItems += quantity;\n      }\n    });\n    \n    const convenienceFee = subtotal > 0 ? 19 : 0;\n    const tax = Math.round(subtotal * 0.05);\n    const total = subtotal + convenienceFee + tax;\n    \n    return {\n      subtotal,\n      convenienceFee,\n      tax,\n      total,\n      totalItems\n    };\n  };\n\n  const getTotalItems = () => {\n    return Object.values(cartItems).reduce((sum, qty) => sum + qty, 0);\n  };\n\n  const isItemInCart = (productId) => {\n    return cartItems[productId] > 0;\n  };\n\n  const getItemQuantity = (productId) => {\n    return cartItems[productId] || 0;\n  };\n\n  const openCart = () => {\n    setIsCartOpen(true);\n  };\n\n  const closeCart = () => {\n    setIsCartOpen(false);\n  };\n\n  const value = {\n    cartItems,\n    isCartOpen,\n    addToCart,\n    updateQuantity,\n    increaseQuantity,\n    decreaseQuantity,\n    removeFromCart,\n    clearCart,\n    getCartTotal,\n    getTotalItems,\n    isItemInCart,\n    getItemQuantity,\n    openCart,\n    closeCart\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"gcAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC7E,OAASC,SAAS,KAAQ,gBAAgB,CAC1C;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAEA,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAQ,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAGR,UAAU,CAACM,WAAW,CAAC,CACvC,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,4CAA4C,CAAC,CAC/D,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC9C,KAAM,CAACc,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CAEnD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CACpD,GAAIF,SAAS,CAAE,CACb,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC,CACtCH,YAAY,CAACM,QAAQ,CAAC,CACxB,CAAE,MAAOG,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDL,YAAY,CAACO,UAAU,CAAC,YAAY,CAAC,CACvC,CACF,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACAvB,SAAS,CAAC,IAAM,CACdgB,YAAY,CAACQ,OAAO,CAAC,YAAY,CAAEL,IAAI,CAACM,SAAS,CAACd,SAAS,CAAC,CAAC,CAC/D,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAe,SAAS,CAAG,QAAAA,CAACC,SAAS,CAAmB,IAAjB,CAAAC,QAAQ,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CACxCjB,YAAY,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACZD,IAAI,MACP,CAACL,SAAS,EAAG,CAACK,IAAI,CAACL,SAAS,CAAC,EAAI,CAAC,EAAIC,QAAQ,EAC9C,CAAC,CAEH;AACA;AACA;AACA;AACF,CAAC,CAED,KAAM,CAAAM,cAAc,CAAGA,CAACP,SAAS,CAAEC,QAAQ,GAAK,CAC9C,GAAIA,QAAQ,EAAI,CAAC,CAAE,CACjBO,cAAc,CAACR,SAAS,CAAC,CACzB,OACF,CAEAf,YAAY,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACZD,IAAI,MACP,CAACL,SAAS,EAAGC,QAAQ,EACrB,CAAC,CACL,CAAC,CAED,KAAM,CAAAQ,gBAAgB,CAAIT,SAAS,EAAK,CACtCf,YAAY,CAACoB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACZD,IAAI,MACP,CAACL,SAAS,EAAG,CAACK,IAAI,CAACL,SAAS,CAAC,EAAI,CAAC,EAAI,CAAC,EACvC,CAAC,CACL,CAAC,CAED,KAAM,CAAAU,gBAAgB,CAAIV,SAAS,EAAK,CACtCf,YAAY,CAACoB,IAAI,EAAI,CACnB,KAAM,CAAAM,UAAU,CAAGN,IAAI,CAACL,SAAS,CAAC,EAAI,CAAC,CACvC,GAAIW,UAAU,EAAI,CAAC,CAAE,CACnB,KAAM,CAAE,CAACX,SAAS,EAAGY,OAAiB,CAAC,CAAGP,IAAI,CAAbQ,IAAI,CAAAC,wBAAA,CAAKT,IAAI,EAArCL,SAAS,EAAAe,GAAA,CAAAC,cAAA,GAClB;AACA,MAAO,CAAAH,IAAI,CACb,CACA,OAAAP,aAAA,CAAAA,aAAA,IACKD,IAAI,MACP,CAACL,SAAS,EAAGW,UAAU,CAAG,CAAC,GAE/B,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAH,cAAc,CAAIR,SAAS,EAAK,CACpCf,YAAY,CAACoB,IAAI,EAAI,CACnB,KAAM,CAAE,CAACL,SAAS,EAAGY,OAAiB,CAAC,CAAGP,IAAI,CAAbQ,IAAI,CAAAC,wBAAA,CAAKT,IAAI,EAArCL,SAAS,EAAAe,GAAA,CAAAC,cAAA,GAClB;AACA,MAAO,CAAAH,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAI,SAAS,CAAGA,CAAA,GAAM,CACtBhC,YAAY,CAAC,CAAC,CAAC,CAAC,CAChB;AACA;AACF,CAAC,CAED,KAAM,CAAAiC,YAAY,CAAIC,cAAc,EAAK,CACvC,GAAI,CAAAC,QAAQ,CAAG,CAAC,CAChB,GAAI,CAAAC,UAAU,CAAG,CAAC,CAElBC,MAAM,CAACC,OAAO,CAACvC,SAAS,CAAC,CAACwC,OAAO,CAACC,KAAA,EAA2B,IAA1B,CAACzB,SAAS,CAAEC,QAAQ,CAAC,CAAAwB,KAAA,CACtD,KAAM,CAAAC,OAAO,CAAGP,cAAc,CAACQ,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAK7B,SAAS,CAAC,CAC5D,GAAI0B,OAAO,CAAE,CACXN,QAAQ,EAAIM,OAAO,CAACI,KAAK,CAAG7B,QAAQ,CACpCoB,UAAU,EAAIpB,QAAQ,CACxB,CACF,CAAC,CAAC,CAEF,KAAM,CAAA8B,cAAc,CAAGX,QAAQ,CAAG,CAAC,CAAG,EAAE,CAAG,CAAC,CAC5C,KAAM,CAAAY,GAAG,CAAGC,IAAI,CAACC,KAAK,CAACd,QAAQ,CAAG,IAAI,CAAC,CACvC,KAAM,CAAAe,KAAK,CAAGf,QAAQ,CAAGW,cAAc,CAAGC,GAAG,CAE7C,MAAO,CACLZ,QAAQ,CACRW,cAAc,CACdC,GAAG,CACHG,KAAK,CACLd,UACF,CAAC,CACH,CAAC,CAED,KAAM,CAAAe,aAAa,CAAGA,CAAA,GAAM,CAC1B,MAAO,CAAAd,MAAM,CAACe,MAAM,CAACrD,SAAS,CAAC,CAACsD,MAAM,CAAC,CAACC,GAAG,CAAEC,GAAG,GAAKD,GAAG,CAAGC,GAAG,CAAE,CAAC,CAAC,CACpE,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIzC,SAAS,EAAK,CAClC,MAAO,CAAAhB,SAAS,CAACgB,SAAS,CAAC,CAAG,CAAC,CACjC,CAAC,CAED,KAAM,CAAA0C,eAAe,CAAI1C,SAAS,EAAK,CACrC,MAAO,CAAAhB,SAAS,CAACgB,SAAS,CAAC,EAAI,CAAC,CAClC,CAAC,CAED,KAAM,CAAA2C,QAAQ,CAAGA,CAAA,GAAM,CACrBxD,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAED,KAAM,CAAAyD,SAAS,CAAGA,CAAA,GAAM,CACtBzD,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,KAAM,CAAA0D,KAAK,CAAG,CACZ7D,SAAS,CACTE,UAAU,CACVa,SAAS,CACTQ,cAAc,CACdE,gBAAgB,CAChBC,gBAAgB,CAChBF,cAAc,CACdS,SAAS,CACTC,YAAY,CACZkB,aAAa,CACbK,YAAY,CACZC,eAAe,CACfC,QAAQ,CACRC,SACF,CAAC,CAED,mBACEpE,IAAA,CAACC,WAAW,CAACqE,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAA9D,QAAA,CAChCA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}