{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect,useCallback}from'react';import{useAuth}from'./AuthContext';import{createOrder,getUserOrders,subscribeToOrders,updateOrderStatus}from'../services/database';import{initializePushNotifications,notifyOrderStatus,subscribeToPushNotifications}from'../services/notifications';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";const OrderContext=/*#__PURE__*/createContext();export const useOrders=()=>{const context=useContext(OrderContext);if(!context){throw new Error('useOrders must be used within an OrderProvider');}return context;};export const OrderProvider=_ref=>{let{children}=_ref;const{user}=useAuth();const[orders,setOrders]=useState([]);const[currentOrder,setCurrentOrder]=useState(null);const[loading,setLoading]=useState(false);const fetchUserOrders=useCallback(async()=>{if(!(user!==null&&user!==void 0&&user.id))return;setLoading(true);try{const{data,error}=await getUserOrders(user.id);if(error){console.error('Error fetching orders:',error);toast.error('Failed to load orders');}else{setOrders(data||[]);// Set current order to the most recent pending order\nconst pendingOrder=data===null||data===void 0?void 0:data.find(order=>['confirmed','preparing','dispatched'].includes(order.status));if(pendingOrder){setCurrentOrder(pendingOrder);}}}catch(error){console.error('Error fetching orders:',error);toast.error('Failed to load orders');}finally{setLoading(false);}},[user===null||user===void 0?void 0:user.id]);// Initialize push notifications and fetch orders on login\nuseEffect(()=>{if(user!==null&&user!==void 0&&user.id){fetchUserOrders();// Initialize push notifications for user\ninitializePushNotifications().then(success=>{if(success){subscribeToPushNotifications(user.id);}});}else{setOrders([]);setCurrentOrder(null);}},[user,fetchUserOrders]);// Subscribe to real-time order updates\nuseEffect(()=>{if(!(user!==null&&user!==void 0&&user.id))return;const unsubscribe=subscribeToOrders(user.id,updatedOrders=>{if(Array.isArray(updatedOrders)){setOrders(updatedOrders);// Update current order if it exists\nif(currentOrder){const updated=updatedOrders.find(o=>o.id===currentOrder.id);if(updated){setCurrentOrder(updated);// Show notification for status changes\nif(updated.status!==currentOrder.status){showStatusNotification(updated.status);// Also send push notification\nnotifyOrderStatus(updated.status,updated);}}}}});return unsubscribe;},[user,currentOrder,fetchUserOrders]);const placeOrder=async orderData=>{var _orderData$items;if(!(user!==null&&user!==void 0&&user.id)){console.error('ðŸ” OrderContext: No user ID found:',user);toast.error('Please sign in to place an order');return{success:false};}// Validate required order data\nif(!orderData.total||!orderData.address||!orderData.deliverySpot||!((_orderData$items=orderData.items)!==null&&_orderData$items!==void 0&&_orderData$items.length)){var _orderData$items2;console.error('ðŸ” OrderContext: Missing required order data:',{total:!!orderData.total,address:!!orderData.address,deliverySpot:!!orderData.deliverySpot,itemsCount:((_orderData$items2=orderData.items)===null||_orderData$items2===void 0?void 0:_orderData$items2.length)||0});toast.error('Missing required order information. Please check your cart and delivery details.');return{success:false};}console.log('ðŸ” OrderContext: Starting order placement with data:',orderData);console.log('ðŸ” OrderContext: User ID:',user.id);setLoading(true);try{const orderPayload={user_id:user.id,total_amount:orderData.total,delivery_address:orderData.address,delivery_spot:orderData.deliverySpot,terrace_accessible:orderData.terraceAccessible,items:orderData.items};console.log('ðŸ” OrderContext: Sending payload to createOrder:',orderPayload);const{data,error}=await createOrder(orderPayload);console.log('ðŸ” OrderContext: createOrder result:',{data,error});if(error){console.error('ðŸ” OrderContext: Error placing order:',error);toast.error(\"Failed to place order: \".concat(error.message||'Please try again.'));return{success:false,error};}if(!data){console.error('ðŸ” OrderContext: No data returned from createOrder');toast.error('Order placement failed - no data received. Please try again.');return{success:false};}// Update local state\nsetOrders(prev=>[data,...prev]);setCurrentOrder(data);console.log('ðŸ” OrderContext: Order placed successfully:',data);toast.success('Order placed successfully! ðŸš');// Start order status simulation for demo\nif(data!==null&&data!==void 0&&data.id){setTimeout(()=>simulateOrderProgress(data.id),1000);}return{success:true,orderId:data.id,data};}catch(error){console.error('ðŸ” OrderContext: Exception placing order:',error);toast.error(\"Order failed: \".concat(error.message||'Please try again.'));return{success:false,error};}finally{setLoading(false);}};// Simulate order progress for demo purposes\nconst simulateOrderProgress=async orderId=>{const statuses=[{status:'preparing',delay:2000,message:'ðŸ“¦ Order is being prepared'},{status:'dispatched',delay:5000,message:'ðŸš Drone dispatched!'},{status:'in_transit',delay:8000,message:'âœˆï¸ On the way to you'},{status:'delivered',delay:10000,message:'ðŸ“¦ Order delivered!'}];for(const{status,delay,message}of statuses){setTimeout(async()=>{const{data,error}=await updateOrderStatus(orderId,status);if(!error&&data){setCurrentOrder(data);setOrders(prev=>prev.map(order=>order.id===orderId?data:order));toast.info(message,{autoClose:3000});}},delay);}};const showStatusNotification=status=>{const messages={'confirmed':'âœ… Order confirmed','preparing':'ðŸ“¦ Preparing your order','dispatched':'ðŸš Drone dispatched','in_transit':'âœˆï¸ On the way','delivered':'ðŸ“¦ Delivered!','cancelled':'âŒ Order cancelled'};const message=messages[status]||\"Order status: \".concat(status);toast.info(message,{autoClose:3000});};const getOrderStatus=order=>{if(!order)return{text:'No active order',color:'#64748b'};const statusConfig={'confirmed':{text:'Order Confirmed',color:'#10b981'},'preparing':{text:'Preparing',color:'#f59e0b'},'dispatched':{text:'Drone Dispatched',color:'#3b82f6'},'in_transit':{text:'In Transit',color:'#6366f1'},'delivered':{text:'Delivered',color:'#10b981'},'cancelled':{text:'Cancelled',color:'#ef4444'}};return statusConfig[order.status]||{text:order.status,color:'#64748b'};};const getEstimatedDeliveryTime=order=>{if(!(order!==null&&order!==void 0&&order.estimated_delivery))return null;const deliveryTime=new Date(order.estimated_delivery);const now=new Date();const diffMinutes=Math.ceil((deliveryTime-now)/(1000*60));if(diffMinutes<=0)return'Arriving now!';if(diffMinutes===1)return'1 minute';return\"\".concat(diffMinutes,\" minutes\");};const value={orders,currentOrder,loading,placeOrder,fetchUserOrders,getOrderStatus,getEstimatedDeliveryTime,updateOrderStatus:async(orderId,status)=>{const{data,error}=await updateOrderStatus(orderId,status);if(!error&&data){setOrders(prev=>prev.map(order=>order.id===orderId?data:order));if((currentOrder===null||currentOrder===void 0?void 0:currentOrder.id)===orderId){setCurrentOrder(data);}}return{data,error};}};return/*#__PURE__*/_jsx(OrderContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","useAuth","createOrder","getUserOrders","subscribeToOrders","updateOrderStatus","initializePushNotifications","notifyOrderStatus","subscribeToPushNotifications","toast","jsx","_jsx","OrderContext","useOrders","context","Error","OrderProvider","_ref","children","user","orders","setOrders","currentOrder","setCurrentOrder","loading","setLoading","fetchUserOrders","id","data","error","console","pendingOrder","find","order","includes","status","then","success","unsubscribe","updatedOrders","Array","isArray","updated","o","showStatusNotification","placeOrder","orderData","_orderData$items","total","address","deliverySpot","items","length","_orderData$items2","itemsCount","log","orderPayload","user_id","total_amount","delivery_address","delivery_spot","terrace_accessible","terraceAccessible","concat","message","prev","setTimeout","simulateOrderProgress","orderId","statuses","delay","map","info","autoClose","messages","getOrderStatus","text","color","statusConfig","getEstimatedDeliveryTime","estimated_delivery","deliveryTime","Date","now","diffMinutes","Math","ceil","value","Provider"],"sources":["/Users/chintandedhia/100xDevs/PropulsionTestData/Drogo_UI/src/contexts/OrderContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { useAuth } from './AuthContext';\nimport { \n  createOrder, \n  getUserOrders, \n  subscribeToOrders,\n  updateOrderStatus\n} from '../services/database';\nimport { \n  initializePushNotifications, \n  notifyOrderStatus, \n  subscribeToPushNotifications \n} from '../services/notifications';\nimport { toast } from 'react-toastify';\n\nconst OrderContext = createContext();\n\nexport const useOrders = () => {\n  const context = useContext(OrderContext);\n  if (!context) {\n    throw new Error('useOrders must be used within an OrderProvider');\n  }\n  return context;\n};\n\nexport const OrderProvider = ({ children }) => {\n  const { user } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [currentOrder, setCurrentOrder] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const fetchUserOrders = useCallback(async () => {\n    if (!user?.id) return;\n    \n    setLoading(true);\n    try {\n      const { data, error } = await getUserOrders(user.id);\n      if (error) {\n        console.error('Error fetching orders:', error);\n        toast.error('Failed to load orders');\n      } else {\n        setOrders(data || []);\n        // Set current order to the most recent pending order\n        const pendingOrder = data?.find(order => \n          ['confirmed', 'preparing', 'dispatched'].includes(order.status)\n        );\n        if (pendingOrder) {\n          setCurrentOrder(pendingOrder);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n      toast.error('Failed to load orders');\n    } finally {\n      setLoading(false);\n    }\n  }, [user?.id]);\n\n  // Initialize push notifications and fetch orders on login\n  useEffect(() => {\n    if (user?.id) {\n      fetchUserOrders();\n      \n      // Initialize push notifications for user\n      initializePushNotifications().then((success) => {\n        if (success) {\n          subscribeToPushNotifications(user.id);\n        }\n      });\n    } else {\n      setOrders([]);\n      setCurrentOrder(null);\n    }\n  }, [user, fetchUserOrders]);\n\n  // Subscribe to real-time order updates\n  useEffect(() => {\n    if (!user?.id) return;\n\n    const unsubscribe = subscribeToOrders(user.id, (updatedOrders) => {\n      if (Array.isArray(updatedOrders)) {\n        setOrders(updatedOrders);\n        // Update current order if it exists\n        if (currentOrder) {\n          const updated = updatedOrders.find(o => o.id === currentOrder.id);\n          if (updated) {\n            setCurrentOrder(updated);\n            // Show notification for status changes\n            if (updated.status !== currentOrder.status) {\n              showStatusNotification(updated.status);\n              // Also send push notification\n              notifyOrderStatus(updated.status, updated);\n            }\n          }\n        }\n      }\n    });\n\n    return unsubscribe;\n  }, [user, currentOrder, fetchUserOrders]);\n\n  const placeOrder = async (orderData) => {\n    if (!user?.id) {\n      console.error('ðŸ” OrderContext: No user ID found:', user);\n      toast.error('Please sign in to place an order');\n      return { success: false };\n    }\n\n    // Validate required order data\n    if (!orderData.total || !orderData.address || !orderData.deliverySpot || !orderData.items?.length) {\n      console.error('ðŸ” OrderContext: Missing required order data:', {\n        total: !!orderData.total,\n        address: !!orderData.address,\n        deliverySpot: !!orderData.deliverySpot,\n        itemsCount: orderData.items?.length || 0\n      });\n      toast.error('Missing required order information. Please check your cart and delivery details.');\n      return { success: false };\n    }\n\n    console.log('ðŸ” OrderContext: Starting order placement with data:', orderData);\n    console.log('ðŸ” OrderContext: User ID:', user.id);\n\n    setLoading(true);\n    try {\n      const orderPayload = {\n        user_id: user.id,\n        total_amount: orderData.total,\n        delivery_address: orderData.address,\n        delivery_spot: orderData.deliverySpot,\n        terrace_accessible: orderData.terraceAccessible,\n        items: orderData.items\n      };\n\n      console.log('ðŸ” OrderContext: Sending payload to createOrder:', orderPayload);\n\n      const { data, error } = await createOrder(orderPayload);\n\n      console.log('ðŸ” OrderContext: createOrder result:', { data, error });\n\n      if (error) {\n        console.error('ðŸ” OrderContext: Error placing order:', error);\n        toast.error(`Failed to place order: ${error.message || 'Please try again.'}`);\n        return { success: false, error };\n      }\n\n      if (!data) {\n        console.error('ðŸ” OrderContext: No data returned from createOrder');\n        toast.error('Order placement failed - no data received. Please try again.');\n        return { success: false };\n      }\n\n      // Update local state\n      setOrders(prev => [data, ...prev]);\n      setCurrentOrder(data);\n      \n      console.log('ðŸ” OrderContext: Order placed successfully:', data);\n      toast.success('Order placed successfully! ðŸš');\n      \n      // Start order status simulation for demo\n      if (data?.id) {\n        setTimeout(() => simulateOrderProgress(data.id), 1000);\n      }\n\n      return { success: true, orderId: data.id, data };\n    } catch (error) {\n      console.error('ðŸ” OrderContext: Exception placing order:', error);\n      toast.error(`Order failed: ${error.message || 'Please try again.'}`);\n      return { success: false, error };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Simulate order progress for demo purposes\n  const simulateOrderProgress = async (orderId) => {\n    const statuses = [\n      { status: 'preparing', delay: 2000, message: 'ðŸ“¦ Order is being prepared' },\n      { status: 'dispatched', delay: 5000, message: 'ðŸš Drone dispatched!' },\n      { status: 'in_transit', delay: 8000, message: 'âœˆï¸ On the way to you' },\n      { status: 'delivered', delay: 10000, message: 'ðŸ“¦ Order delivered!' }\n    ];\n\n    for (const { status, delay, message } of statuses) {\n      setTimeout(async () => {\n        const { data, error } = await updateOrderStatus(orderId, status);\n        if (!error && data) {\n          setCurrentOrder(data);\n          setOrders(prev => prev.map(order => \n            order.id === orderId ? data : order\n          ));\n          toast.info(message, { autoClose: 3000 });\n        }\n      }, delay);\n    }\n  };\n\n  const showStatusNotification = (status) => {\n    const messages = {\n      'confirmed': 'âœ… Order confirmed',\n      'preparing': 'ðŸ“¦ Preparing your order',\n      'dispatched': 'ðŸš Drone dispatched',\n      'in_transit': 'âœˆï¸ On the way',\n      'delivered': 'ðŸ“¦ Delivered!',\n      'cancelled': 'âŒ Order cancelled'\n    };\n\n    const message = messages[status] || `Order status: ${status}`;\n    toast.info(message, { autoClose: 3000 });\n  };\n\n  const getOrderStatus = (order) => {\n    if (!order) return { text: 'No active order', color: '#64748b' };\n\n    const statusConfig = {\n      'confirmed': { text: 'Order Confirmed', color: '#10b981' },\n      'preparing': { text: 'Preparing', color: '#f59e0b' },\n      'dispatched': { text: 'Drone Dispatched', color: '#3b82f6' },\n      'in_transit': { text: 'In Transit', color: '#6366f1' },\n      'delivered': { text: 'Delivered', color: '#10b981' },\n      'cancelled': { text: 'Cancelled', color: '#ef4444' }\n    };\n\n    return statusConfig[order.status] || { text: order.status, color: '#64748b' };\n  };\n\n  const getEstimatedDeliveryTime = (order) => {\n    if (!order?.estimated_delivery) return null;\n\n    const deliveryTime = new Date(order.estimated_delivery);\n    const now = new Date();\n    const diffMinutes = Math.ceil((deliveryTime - now) / (1000 * 60));\n\n    if (diffMinutes <= 0) return 'Arriving now!';\n    if (diffMinutes === 1) return '1 minute';\n    return `${diffMinutes} minutes`;\n  };\n\n  const value = {\n    orders,\n    currentOrder,\n    loading,\n    placeOrder,\n    fetchUserOrders,\n    getOrderStatus,\n    getEstimatedDeliveryTime,\n    updateOrderStatus: async (orderId, status) => {\n      const { data, error } = await updateOrderStatus(orderId, status);\n      if (!error && data) {\n        setOrders(prev => prev.map(order => \n          order.id === orderId ? data : order\n        ));\n        if (currentOrder?.id === orderId) {\n          setCurrentOrder(data);\n        }\n      }\n      return { data, error };\n    }\n  };\n\n  return (\n    <OrderContext.Provider value={value}>\n      {children}\n    </OrderContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}